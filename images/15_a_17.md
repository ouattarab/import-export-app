**Migration de Angular 15 vers Angular 17 - Documentation Compl√®te**

---

# 1. Pr√©-requis avant la migration
- S'assurer que tous les tests passent sur votre application Angular 15.
- Faire une sauvegarde du projet ou travailler sur une branche sp√©cifique `migration/angular-17`.
- Avoir Node.js >= 18.13 et npm >= 8.19.3.

# 2. Migration de Angular 15 √† Angular 16

## Mise √† jour du CLI
```bash
npm install -g @angular/cli@16
```

## Mise √† jour du projet
Avant chaque migration majeure, **ex√©cuter toujours `ng update`** pour que Angular propose les commandes adapt√©es √† votre projet.

```bash
ng update
```
Puis :
```bash
ng update @angular/core@16 @angular/cli@16
```

### Points de vigilance
- **Standalone Components** : Angular 16 introduit les standalone components de mani√®re officielle, mais ce n'est pas obligatoire de migrer tout de suite.
- **HttpClient** : Support pour `withCredentials` mieux int√©gr√©.
- **Am√©liorations Signals** (introduits exp√©rimentalement)

### Modifications √©ventuelles dans le code
- Si vous utilisez `HttpParams` ou `HttpHeaders`, ils deviennent immuables, attention aux modifications par cha√Ænage.

Exemple :
```diff
- let params = new HttpParams();
- params.set('key', 'value');
+ let params = new HttpParams().set('key', 'value');
```

# 3. Migration de Angular 16 √† Angular 17

## Mise √† jour du CLI
```bash
npm install -g @angular/cli@17
```

## Mise √† jour du projet
Encore une fois, avant toute mise √† jour :
```bash
ng update
```
Puis :
```bash
ng update @angular/core@17 @angular/cli@17
```

### Points de vigilance
- **Standalone Components** recommand√©s par d√©faut :
  - Angular 17 met fortement en avant les standalone components, mais vous pouvez garder le syst√®me de NgModules si vous voulez.
- **Routeur refondu** : Nouveau syst√®me de d√©finition des routes avec `provideRouter()`.
- **Hydration** am√©lior√© pour server-side rendering (SSR)

### Modifications √©ventuelles dans le code

**Standalone Components**
- Nouveau syst√®me si vous voulez cr√©er un composant :

```diff
- @NgModule({
-   declarations: [HomeComponent],
-   imports: [CommonModule]
- })
- export class HomeModule {}

+ @Component({
+   standalone: true,
+   selector: 'app-home',
+   templateUrl: './home.component.html',
+   imports: [CommonModule]
+ })
+ export class HomeComponent {}
```

**Routing**
- Ancienne fa√ßon :
```typescript
RouterModule.forRoot(routes)
```
- Nouvelle fa√ßon recommand√©e :
```typescript
provideRouter(routes)
```

**Angular SSR**
- Si votre projet est rendu c√¥t√© serveur, pensez √† activer l'hydration :

```typescript
import { provideClientHydration } from '@angular/platform-browser';

bootstrapApplication(AppComponent, {
  providers: [provideClientHydration()]
});
```

# 4. Mise √† jour des packages tiers
- Mettre √† jour les librairies compatibles Angular 17 (ex: Angular Material, ngx-translate, etc.)
- Regarder chaque changelog des librairies pour √©viter des incompatibilit√©s.

Exemple pour Angular Material :
```bash
ng update @angular/material
```

# 5. Tests post-migration
- Relancer `ng build` pour v√©rifier qu'il n'y a pas d'erreurs.
- Relancer tous les tests unitaires et d'int√©gration.
- V√©rifier le fonctionnement de l'application √† la main.

# 6. Bonus : passage √† `esbuild`
Angular 17 recommande l'usage de `esbuild` pour un build beaucoup plus rapide.

Activer dans `angular.json` :
```json
"builder": "@angular-devkit/build-angular:application-esbuild"
```

---

**F√©licitations ! üéâ Vous avez migr√© de Angular 15 √† Angular 17 !**

---

**Checklist rapide :**
- [x] `ng update @angular/core @angular/cli`
- [x] Corrections du code (HttpParams, Standalone Components si besoin)
- [x] Mise √† jour des librairies externes
- [x] Tests OK
- [x] Build OK

---



